{% extends "base.html" %}
{% block head %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    #main{
        width: 95%;
        height: 100%;
        margin-left: 10px;
        margin-right: 10px;
        font-size: 30px;
    }
    #all{
        max-width: 1800px;
        max-height: 1200px;
        margin: 0 auto;
        border: 1px solid #999;
        /* background-color: #333; */
    }
</style>
{% endblock head %}


{% block content %}

<div id="sr">
    <div id="all">
        <div id="title">
            <h1>長期電力預測結果</h1>
        <div id="main">
            <canvas id="myChart"></canvas>
        </div>
    </div>
</div>
<a href="/" style="text-align: center; display: block;">回首頁</a>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // 示例数据
        var data = {{data | tojson | safe}};

        // 提取时间和行业数据
        var times = data.map(entry => entry.time);
        var electricity_predict = data.map(entry => entry.electricity_predict);
        var industries = data.map(entry => entry.industry);

        // 创建折线图
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: times,
                datasets: [{
                    label: '電力預測',
                    data: electricity_predict,
                    fill: false,
                    borderColor: 'rgb(75, 192, 192)',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x:{

                        time : {
                            displayFormats: {
                                quarter: 'YYYY-MM'
                            }
                        }
                        
                    }
                    }
                }
            
        });
    });
</script>



{% endblock content %}
